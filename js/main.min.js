const $=(e,t=document)=>t.querySelector(e),$$=(e,t=document)=>Array.from((t||document).querySelectorAll(e));function openModal(){const e=document.getElementById("infoModal");e&&(e.style.display="flex")}function closeModal(){const e=document.getElementById("infoModal");e&&(e.style.display="none")}function goToContactForm(){closeModal();const e=document.getElementById("contactFormSection");e&&(e.style.display="block",e.scrollIntoView({behavior:"smooth"}))}function toggleCompanyField(){const e=(document.getElementById("personType")||{}).value,t=document.getElementById("companyField");t&&(t.style.display="pravna"===e?"block":"none")}function createHoverOverlay(){const e=document.createElement("div");e.className="pb-hover-overlay",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.background="rgba(0,0,0,0.55)",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.zIndex="9999";const t=document.createElement("div");t.style.maxWidth="420px",t.style.padding="28px",t.style.borderRadius="12px",t.style.textAlign="center",t.style.background="rgba(12,16,20,0.95)",t.style.color="#fff",t.style.boxShadow="0 10px 30px rgba(0,0,0,0.6)",t.innerHTML='<h2 style="margin:0 0 10px;">Alat vam je koristan?</h2><p style="margin:0 0 18px;">Kontaktirajte nas i pretplatite se na puni pristup.</p>';const o=document.createElement("button");return o.textContent="OK",o.style.padding="10px 18px",o.style.borderRadius="8px",o.style.cursor="pointer",o.style.border="none",o.style.fontWeight="600",o.addEventListener("click",()=>{e.parentElement&&e.parentElement.removeChild(e)}),t.appendChild(o),e.appendChild(t),e}document.addEventListener("DOMContentLoaded",()=>{$$(".iframe-box.no-crop").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",openModal)}),$$(".iframe-box:not(.no-crop)").forEach(e=>{let t=null,o=null;const n=()=>{clearTimeout(t),t=setTimeout(()=>{o||(o=createHoverOverlay(),document.body.appendChild(o))},45e3)},r=()=>{clearTimeout(t),o&&o.parentElement&&(o.parentElement.removeChild(o),o=null)};e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",r),e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)});const e=document.getElementById("openContactForm"),t=document.getElementById("contactFormSection");if(e&&t&&e.addEventListener("click",e=>{e.preventDefault();const o="none"===getComputedStyle(t).display;t.style.display=o?"block":"none",o&&t.scrollIntoView({behavior:"smooth"})}),document.getElementById("heroCTA"),t){const e=document.getElementById("personType");e&&(e.addEventListener("change",toggleCompanyField),toggleCompanyField())}const o=document.getElementById("contactForm"),n=document.getElementById("formMessage");if(o&&n&&o.addEventListener("submit",e=>{e.preventDefault(),n.textContent="";const t=new FormData(o);fetch("https://formspree.io/f/mkogrgyz",{method:"POST",body:t,headers:{Accept:"application/json"}}).then(async e=>{if(e.ok)n.innerText="Hvala, vaša poruka je poslana! Kontaktirati ćemo Vas povratno",o.reset(),toggleCompanyField();else{let t="Ups! Došlo je do greške, pokušajte ponovno.";try{const o=await e.json();o&&o.error&&(t=o.error)}catch(e){}n.innerText=t}}).catch(()=>{n.innerText="Ups! Došlo je do greške, pokušajte ponovno."})}),document.getElementById("infoModal"),$$(".modal-buttons .btn-primary").forEach(e=>e.addEventListener("click",goToContactForm)),$$(".modal-buttons .btn-secondary").forEach(e=>e.addEventListener("click",closeModal)),document.getElementById("navKontakt"),t){const e=document.getElementById("navKontakt");e&&t&&e.addEventListener("click",e=>{setTimeout(()=>{t.style.display="block"},300)})}});document.getElementById("heroCTA").addEventListener("click",function(e){e.preventDefault(),window.scrollBy({top:window.innerHeight,behavior:"smooth"})});
